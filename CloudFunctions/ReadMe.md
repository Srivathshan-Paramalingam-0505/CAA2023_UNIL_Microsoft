## Cloud Functions on GCP
This section contains three different cloud functions we deployed through Google Cloud Platform

* *Cloud_Function_FindLocation.py*:  This Python function is designed to act as an endpoint for a web API that accepts POST requests. The purpose of this API is to fetch a map image from Google Maps based on specific input parameters (center of the map, zoom level, and size of the map), and return this image as a base64-encoded string.
As it required to use libraries like PIL or BytesIO to be able to retrieve an image from that function, it was feasible from Google Collab. However, as our IoT device work in MicroPython, hence do not have the same available library, we did not pursue that direction as it would have required to install complementary libraries directly within our device.
* *Cloud_Function_generateMap.py:* This Python function receives HTTP POST or PUT requests containing parameters for origin, destination, and mode of a journey. It uses these parameters to query the Google Directions API for route details, including a polyline representing the route. After decoding and then re-encoding this polyline, the function creates a request for the Google Static Maps API to generate a static map image depicting the journey's path with markers for start and end points. The function fetches this image, saves it locally as a PNG, and then uploads this image to a Google Cloud Storage bucket named 'maps_bucket'. Lastly, it deletes the local image file. While the function doesn't return any explicit data, its operation results in the creation of a map image in cloud storage based on the journey details provided in the HTTP request.
We had two reasons that did not convince us to use that function to proceed in our project. First, a technical one concerning the "PNG" format that our M5stack core2 device did not accept although we verified to provide it the right format. Secondly, a more practical reason is that even if we could display the image, we would not have any data on it to work with. It would have required a device able to display a lot of image within a short time and that did not fit with the core2 capacity.
* *Cloud_Function_generate_step_info.py:* The Python function generate_step_info2 takes an HTTP request, retrieves "origin" and "destination" from the request's JSON data, and uses these to call the Google Directions API for a bike-friendly route. The function processes the returned JSON data, iterating over each step in the route to extract information like distance, duration, maneuver, and starting coordinates (latitude and longitude). Each step's data is collected into a tuple and stored in a list, step_info. Finally, this list is converted into a JSON-encoded string and returned by the function. This string represents a list of tuples, each containing data for a single step of the proposed bike route. A valid Google Maps API key is required for the function to work.
We progressed in our idea with that function, as we could fetch the right data within our IoT device and use them to start coding what we intended to calculate and display on the screen device.
